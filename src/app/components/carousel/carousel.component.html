<div class="relative mx-5 my-2 bg-viola rounded-2xl">
  <!-- Carousel wrapper -->
  <div class="relative h-96">
    <div
      class="h-[100%] w-[calc(100% - 5rem)] mx-20 flex items-center justify-center gap-3"
    >
      @if (numeroCarousel - 1 >= 0 ) {
      <img
        [src]="carousel[numeroCarousel - 1]"
        [alt]="carouselName[numeroCarousel - 1]"
        (click)="
          stopAutoSlide();
          openImage(
            carousel[numeroCarousel - 1],
            carouselName[numeroCarousel - 1]
          )
        "
        class="hidden md:block md:w-1/3 h-[calc(100%-2rem)] object-cover obj-center-top rounded-lg"
      />
      } @else{
      <img
        [src]="carousel[carousel.length - 1]"
        [alt]="carouselName[carousel.length - 1]"
        (click)="
          stopAutoSlide();
          openImage(
            carousel[carousel.length - 1],
            carouselName[carousel.length - 1]
          )
        "
        class="hidden md:block md:w-1/3 h-[calc(100%-2rem)] object-cover obj-center-top rounded-lg"
      />
      }

      <img
        [src]="carousel[numeroCarousel]"
        [alt]="carouselName[numeroCarousel]"
        (click)="
          stopAutoSlide();
          openImage(carousel[numeroCarousel], carouselName[numeroCarousel])
        "
        class="w-[100%] md:w-1/3 h-[calc(100%-2rem)] object-cover obj-center-top rounded-lg"
      />
      @if (numeroCarousel + 1 < carousel.length ) {
      <img
        [src]="carousel[numeroCarousel + 1]"
        [alt]="carouselName[numeroCarousel + 1]"
        (click)="
          stopAutoSlide();
          openImage(
            carousel[numeroCarousel + 1],
            carouselName[numeroCarousel + 1]
          )
        "
        class="hidden md:block md:w-1/3 h-[calc(100%-2rem)] object-cover obj-center-top rounded-lg"
      />
      }@else{
      <img
        [src]="carousel[0]"
        [alt]="carouselName[0]"
        (click)="stopAutoSlide(); openImage(carousel[0], carouselName[0])"
        class="hidden md:block md:w-1/3 h-[calc(100%-2rem)] object-cover obj-center-top rounded-lg"
      />
      }
    </div>
  </div>
  <!-- Slider controls -->
  <button
    type="button"
    class="absolute top-0 start-0 z-10 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none disabled:hidden"
    (click)="indietro(); stopAutoSlide(); startAutoSlide()"
  >
    <span
      class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none"
    >
      <svg
        class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 6 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 1 1 5l4 4"
        />
      </svg>
      <span class="sr-only">Precedente</span>
    </span>
  </button>
  <button
    type="button"
    class="absolute top-0 end-0 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none disabled:hidden"
    (click)="avanti(); stopAutoSlide(); startAutoSlide()"
  >
    <span
      class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none"
    >
      <svg
        class="w-4 h-4 text-white rtl:rotate-180"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 6 10"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 9 4-4-4-4"
        />
      </svg>
      <span class="sr-only">Successivo</span>
    </span>
  </button>
</div>

@if(apriImmagine){
<app-open-image
  [image]="image"
  [imageName]="imageName"
  (immagineAperta)="closeImage($event)"
></app-open-image>
}
